@model KargoTakibi.Models.Kargo

@{
    ViewData["Title"] = "Kargo Detayı";
}

<div class="form-page-container" style="max-width: 1100px;">
    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
        <div>
            <h1 style="font-size: 2rem; font-weight: 800; margin: 0;">Kargo Detayı <span style="color: var(--primary);">#@(Model.TakipNo ?? "YENI")</span></h1>
        </div>
        <div style="display: flex; gap: 0.75rem;">
            <a asp-action="Duzenle" asp-route-id="@Model.KargoID" class="btn btn-secondary btn-sm">
                <i class="bi bi-pencil-square"></i> Düzenle
            </a>
            <a asp-controller="Hareket" asp-action="YeniHareket" asp-route-id="@Model.KargoID" class="btn btn-primary btn-sm">
                <i class="bi bi-plus-lg"></i> Durum Güncelle
            </a>
        </div>
    </div>

    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem;">
        <div class="card-glass">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; border-bottom: 1px solid var(--border); padding-bottom: 1rem;">
                <div style="display: flex; align-items: center; gap: 0.75rem;">
                    <div style="width: 40px; height: 40px; background: rgba(225, 29, 72, 0.1); border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; color: var(--primary);">
                        <i class="bi bi-info-circle-fill" style="font-size: 1.25rem;"></i>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.15rem;">Genel Bilgiler</h3>
                        <p style="margin: 0; font-size: 0.8rem; color: var(--text-secondary);">Gönderi ve teslimat detayları</p>
                    </div>
                </div>
                <div style="text-align: right;">
                    <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.2rem;">Güncel Durum</div>
                    @if (Model.Durum == "Teslim Edildi") { <span class="badge badge-success">@Model.Durum</span> }
                    else if (Model.Durum == "Yolda") { <span class="badge badge-info">@Model.Durum</span> }
                    else { <span class="badge badge-warning">@(Model.Durum ?? "Sırada")</span> }
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                <div>
                    <label style="display: block; font-size: 0.7rem; color: var(--primary); font-weight: 700; text-transform: uppercase; margin-bottom: 0.4rem;"><i class="bi bi-person-up"></i> Gönderici</label>
                    <div style="font-size: 1rem; font-weight: 700;">@Model.GondericiAd</div>
                    <div style="color: var(--text-secondary); margin-top: 0.2rem; font-size: 0.9rem;">@Model.GondericiTelefonu</div>
                    <div style="font-size: 0.85rem; color: var(--text-muted); margin-top: 0.4rem; line-height: 1.4;">
                        @Model.GondericiAdresi<br />
                        <strong>@Model.GondericiIlce, @Model.GondericiIl</strong>
                    </div>
                </div>
                <div>
                    <label style="display: block; font-size: 0.7rem; color: var(--primary); font-weight: 700; text-transform: uppercase; margin-bottom: 0.4rem;"><i class="bi bi-person-down"></i> Alıcı</label>
                    <div style="font-size: 1rem; font-weight: 700;">@Model.AliciAd</div>
                    <div style="color: var(--text-secondary); margin-top: 0.2rem; font-size: 0.9rem;">@Model.AliciTelefonu</div>
                    <div style="font-size: 0.85rem; color: var(--text-muted); margin-top: 0.4rem; line-height: 1.4;">
                        @Model.AliciAdresi<br />
                        <strong>@Model.AliciIlce, @Model.AliciIl</strong>
                    </div>
                </div>
            </div>

            <div style="padding-top: 1.25rem; border-top: 1px solid var(--border); margin-top: 1.5rem; display: flex; gap: 2rem; align-items: center; flex-wrap: wrap;">
                <div>
                    <label style="display: block; font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 0.2rem;">Kayıt Tarihi</label>
                    <div style="font-weight: 600; font-size: 0.9rem;">@DateTime.Now.ToShortDateString()</div>
                </div>
                <div>
                    <label style="display: block; font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 0.2rem;">Tahmini Teslim</label>
                    <div style="font-weight: 600; color: var(--success); font-size: 0.9rem;">@DateTime.Now.AddDays(2).ToShortDateString()</div>
                </div>
                <div style="flex: 1; text-align: right;">
                    <a asp-controller="Hareket" asp-action="KargoHareketleri" asp-route-id="@Model.KargoID" class="btn btn-outline btn-sm">
                        <i class="bi bi-map-fill"></i> Detaylı Hareketler
                    </a>
                </div>
            </div>
        </div>

        <div class="card-glass">
            <h3 style="margin-bottom: 1.25rem; display: flex; align-items: center; gap: 0.6rem; font-size: 1.1rem;">
                <i class="bi bi-clock-history" style="color: var(--primary);"></i> Son Hareketler
            </h3>
            
            <div class="timeline" style="border-left: 2px dashed var(--border); padding-left: 1rem;">
                @if (Model.Hareketler != null && Model.Hareketler.Any())
                {
                    @foreach (var hareket in Model.Hareketler.OrderByDescending(h => h.Tarih).Take(4))
                    {
                        <div class="timeline-item" style="margin-bottom: 1rem;">
                            <div class="timeline-dot" style="border-color: var(--primary); width: 8px; height: 8px; left: -1.5rem;"></div>
                            <div style="font-size: 0.8rem; font-weight: 700; color: var(--text-main);">@hareket.Durum</div>
                            <div style="font-size: 0.7rem; color: var(--text-muted);">@hareket.Tarih.ToString("dd MMM yyyy HH:mm")</div>
                        </div>
                    }
                }
                else
                {
                    <div style="color: var(--text-muted); font-size: 0.85rem; padding: 0.5rem 0;">Henüz hareket kaydı yok.</div>
                }
            </div>
            
            <div style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-body); border-radius: var(--radius-md); text-align: center;">
                <div style="font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Takip Numarası</div>
                <div style="font-family: monospace; font-size: 1.1rem; font-weight: 800; color: var(--primary); letter-spacing: 0.08em; padding: 0.5rem; background: rgba(0,0,0,0.3); border-radius: 4px;">
                    @(Model.TakipNo ?? "BEKLEMEDE")
                </div>
            </div>
        </div>
    </div>
</div>

