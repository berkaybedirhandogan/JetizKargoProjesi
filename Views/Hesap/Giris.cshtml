@model KargoTakibi.Models.Kullanici

@{
    ViewData["Title"] = "Giriş Yap";
}

<div class="row justify-center" style="min-height: 80vh; align-items: center;">
    <div class="col-lg-4 col-md-6 col-11">
        <div class="card-glass" style="border-top: 4px solid var(--primary); padding: 2.5rem 2rem;">
            <div style="text-align: center; margin-bottom: 2.5rem;">
                <div style="width: 64px; height: 64px; margin: 0 auto 1.5rem auto; background: rgba(225, 29, 72, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--primary);">
                    <i class="bi bi-box-arrow-in-right" style="font-size: 1.75rem;"></i>
                </div>
                <h1 style="font-size: 1.75rem; margin-bottom: 0.5rem;">Hoş Geldiniz</h1>
                <p style="font-size: 0.95rem; color: var(--text-secondary);">Devam etmek için giriş yapın</p>
            </div>

            <form asp-action="Giris" method="post">
                @if (ViewData.ModelState.ErrorCount > 0)
                {
                    <div class="badge badge-danger w-100 mb-4" style="padding: 0.75rem; text-align: left; justify-content: start;">
                        <i class="bi bi-exclamation-octagon-fill"></i>
                        <span>Email veya şifre hatalı!</span>
                    </div>
                }

                <div class="form-group">
                    <label asp-for="Email" class="form-label">E-posta</label>
                    <div class="input-wrap">
                        <input asp-for="Email" class="form-control" placeholder="E-posta adresiniz" />
                        <i class="bi bi-envelope-at-fill"></i>
                    </div>
                </div>

                <div class="form-group">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <label asp-for="Sifre" class="form-label" style="margin: 0;">Şifre</label>
                    </div>
                    <div class="input-wrap" style="position: relative;">
                        <input asp-for="Sifre" type="password" id="sifreInput" class="form-control" placeholder="Şifreniz" style="padding-right: 3rem;" />
                        <button type="button" onclick="togglePassword('sifreInput', this)" style="position: absolute; right: 0; top: 0; height: 100%; width: 3rem; background: none; border: none; color: var(--text-muted); cursor: pointer; display: flex; align-items: center; justify-content: center; z-index: 10;">
                            <i class="bi bi-eye" style="position: static !important; transform: none !important; pointer-events: none;"></i>
                        </button>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary w-100" style="margin-top: 1rem; padding: 1rem;">
                    Giriş Yap <i class="bi bi-arrow-right-short" style="font-size: 1.25rem;"></i>
                </button>
            </form>

            <div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--border); text-align: center;">
                <span style="color: var(--text-secondary); font-size: 0.9rem;">Henüz üye değil misiniz?</span>
                <a asp-action="Kayit" style="color: var(--primary); font-weight: 700; margin-left: 0.5rem; text-decoration: underline;">Hemen Kaydolun</a>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script>
        function togglePassword(inputId, btn) {
            var input = document.getElementById(inputId);
            var icon = btn.querySelector('i');
            if (input.type === 'password') {
                input.type = 'text';
                icon.className = 'bi bi-eye-slash';
            } else {
                input.type = 'password';
                icon.className = 'bi bi-eye';
            }
        }
    </script>
}
